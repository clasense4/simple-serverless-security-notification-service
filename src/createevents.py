import os
import json
import gzip
import base64

data = b'{"messageType":"DATA_MESSAGE","owner":"123456789123","logGroup":"testLogGroup","logStream":"testLogStream","subscriptionFilters":["testFilter"],"logEvents":[{"id":"eventId1","timestamp":1440442987000,"message":"{\\"eventVersion\\":\\"1.05\\",\\"userIdentity\\":{\\"type\\":\\"Root\\",\\"principalId\\":\\"864419182307\\",\\"arn\\":\\"arn:aws:iam::864419182307:root\\",\\"accountId\\":\\"864419182307\\",\\"accessKeyId\\":\\"ASIA4SQ3F63R5ZYUYWHO\\",\\"sessionContext\\":{\\"sessionIssuer\\":{},\\"webIdFederationData\\":{},\\"attributes\\":{\\"mfaAuthenticated\\":\\"true\\",\\"creationDate\\":\\"2020-06-19T16:41:12Z\\"}}},\\"eventTime\\":\\"2020-06-19T23:42:06Z\\",\\"eventSource\\":\\"iam.amazonaws.com\\",\\"eventName\\":\\"AddUserToGroup\\",\\"awsRegion\\":\\"us-east-1\\",\\"sourceIPAddress\\":\\"128.199.253.143\\",\\"userAgent\\":\\"console.amazonaws.com\\",\\"requestParameters\\":{\\"groupName\\":\\"administrator\\",\\"userName\\":\\"administratorgoat\\"},\\"responseElements\\":null,\\"requestID\\":\\"a0bf6f24-f0a9-45b1-bd1f-cb18daf68421\\",\\"eventID\\":\\"b1c59fca-703e-4ead-8ca7-1516522b9c5b\\",\\"eventType\\":\\"AwsApiCall\\",\\"recipientAccountId\\":\\"864419182307\\"}"},{"id":"eventId2","timestamp":1440442987001,"message":"{\\"eventVersion\\":\\"1.05\\",\\"userIdentity\\":{\\"type\\":\\"IAMUser\\",\\"principalId\\":\\"AIDA4SQ3F63RQT2Y7A7HK\\",\\"arn\\":\\"arn:aws:iam::864419182307:user/fajriserverless\\",\\"accountId\\":\\"864419182307\\",\\"accessKeyId\\":\\"AKIA4SQ3F63RRBQLYHTG\\",\\"userName\\":\\"fajriserverless\\"},\\"eventTime\\":\\"2020-06-18T04:58:27Z\\",\\"eventSource\\":\\"ec2.amazonaws.com\\",\\"eventName\\":\\"AuthorizeSecurityGroupIngress\\",\\"awsRegion\\":\\"ap-southeast-1\\",\\"sourceIPAddress\\":\\"202.80.214.161\\",\\"userAgent\\":\\"aws-sdk-go/1.31.2 (go1.13.7; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.12.25 (+https://www.terraform.io)\\",\\"requestParameters\\":{\\"groupId\\":\\"sg-05a4e22c208ded49f\\",\\"ipPermissions\\":{\\"items\\":[{\\"ipProtocol\\":\\"tcp\\",\\"fromPort\\":22,\\"toPort\\":22,\\"groups\\":{},\\"ipRanges\\":{\\"items\\":[{\\"cidrIp\\":\\"0.0.0.0/0\\"}]},\\"ipv6Ranges\\":{},\\"prefixListIds\\":{}}]}},\\"responseElements\\":{\\"requestId\\":\\"9c4acdbc-024e-4c23-8bba-0be5d98bd7d4\\",\\"_return\\":true},\\"requestID\\":\\"9c4acdbc-024e-4c23-8bba-0be5d98bd7d4\\",\\"eventID\\":\\"dfa8864d-888e-4760-bbee-b573395ed51e\\",\\"eventType\\":\\"AwsApiCall\\",\\"recipientAccountId\\":\\"864419182307\\"}"},{"id":"eventId2","timestamp":1440442987001,"message":"{\\"eventVersion\\":\\"1.05\\",\\"userIdentity\\":{\\"type\\":\\"Root\\",\\"principalId\\":\\"864419182307\\",\\"arn\\":\\"arn:aws:iam::864419182307:root\\",\\"accountId\\":\\"864419182307\\",\\"accessKeyId\\":\\"\\"},\\"eventTime\\":\\"2020-06-20T06:22:59Z\\",\\"eventSource\\":\\"signin.amazonaws.com\\",\\"eventName\\":\\"ConsoleLogin\\",\\"awsRegion\\":\\"us-east-1\\",\\"sourceIPAddress\\":\\"202.80.214.161\\",\\"userAgent\\":\\"Mozilla/5.0 (X11; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0\\",\\"requestParameters\\":null,\\"responseElements\\":{\\"ConsoleLogin\\":\\"Success\\"},\\"additionalEventData\\":{\\"LoginTo\\":\\"https://console.aws.amazon.com/console/home?state=hashArgs%23&isauthcode=true\\",\\"MobileVersion\\":\\"No\\",\\"MFAUsed\\":\\"Yes\\"},\\"eventID\\":\\"0732a44c-5b03-4610-b56e-afbb0dce8c12\\",\\"eventType\\":\\"AwsConsoleSignIn\\",\\"recipientAccountId\\":\\"864419182307\\"}"},{"id":"eventId2","timestamp":1440442987001,"message":"{\\"eventVersion\\":\\"1.05\\",\\"userIdentity\\":{\\"type\\":\\"IAMUser\\",\\"principalId\\":\\"AIDA4SQ3F63RQT2Y7A7HK\\",\\"arn\\":\\"arn:aws:iam::864419182307:user/fajriserverless\\",\\"accountId\\":\\"864419182307\\",\\"accessKeyId\\":\\"AKIA4SQ3F63RRBQLYHTG\\",\\"userName\\":\\"fajriserverless\\"},\\"eventTime\\":\\"2020-06-18T04:58:27Z\\",\\"eventSource\\":\\"ec2.amazonaws.com\\",\\"eventName\\":\\"AuthorizeSecurityGroupIngress\\",\\"awsRegion\\":\\"ap-southeast-1\\",\\"sourceIPAddress\\":\\"202.80.214.161\\",\\"userAgent\\":\\"aws-sdk-go/1.31.2 (go1.13.7; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.12.25 (+https://www.terraform.io)\\",\\"requestParameters\\":{\\"groupId\\":\\"sg-07e2f0903ac4a97c1\\",\\"ipPermissions\\":{\\"items\\":[{\\"ipProtocol\\":\\"tcp\\",\\"fromPort\\":8080,\\"toPort\\":8080,\\"groups\\":{},\\"ipRanges\\":{\\"items\\":[{\\"cidrIp\\":\\"0.0.0.0/0\\"}]},\\"ipv6Ranges\\":{},\\"prefixListIds\\":{}}]}},\\"responseElements\\":{\\"requestId\\":\\"041f4992-1ff1-4795-b3af-288dcf3f3a3d\\",\\"_return\\":true},\\"requestID\\":\\"041f4992-1ff1-4795-b3af-288dcf3f3a3d\\",\\"eventID\\":\\"1a0d391d-489c-4945-b2a4-30c60945e97f\\",\\"eventType\\":\\"AwsApiCall\\",\\"recipientAccountId\\":\\"864419182307\\"}"}]}'


gzip_string = gzip.compress(data)
print(gzip_string)
base64_encoded = base64.b64encode(gzip_string)
print(base64_encoded)